"use strict";exports.id=5549,exports.ids=[5549],exports.modules={85549:(e,t,s)=>{s.r(t),s.d(t,{default:()=>DeleteUserSidebar});var l=s(57087),i=s(73867),r=s(76937),n=s(45232),a=s(36960),o=s.n(a);function DeleteUserSidebar(){let e=(0,r.useRouter)(),{data:t}=(0,n.useSession)();(0,i.useEffect)(()=>{t&&t.user&&t.user.email||e.push("/")});let s=t?.user?.email,[a,d]=(0,i.useState)(""),[c,u]=(0,i.useState)(!1),handleSubmit=async e=>{if(e.preventDefault(),a!=s){u(!0);return}try{let e=await fetch("/api/deleteUser",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s})});e&&(0,n.signOut)({callbackUrl:"http://localhost:3000/"})}catch(e){console.log("Error during user deletion: ",e)}};return(0,l.jsxs)("div",{className:"flex min-h-screen flex-col",children:[l.jsx("header",{className:"sticky top-0 flex h-16 items-center justify-center text-2xl font-bold",children:"Delete Account"}),l.jsx("h2",{className:"mt-8 text-lg font-bold tracking-tight text-red-500",children:"Warning: this will permanently delete your account"}),l.jsx("div",{className:"mt-8 flex flex-1 flex-col md:flex-row",children:(0,l.jsxs)("aside",{className:"w-full",children:[(0,l.jsxs)("form",{onSubmit:handleSubmit,action:"#",method:"POST",className:"space-y-6",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-gray-900",children:"Enter current email to confirm"}),l.jsx("div",{className:"mt-2",children:l.jsx("input",{onChange:e=>d(e.target.value),id:"email",name:"email",type:"email",required:!0,className:"block w-full rounded-md border-0 py-1.5 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})}),c&&l.jsx("div",{className:"mt-2 text-sm leading-6 text-red-500",children:"Entered email does not match"})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",className:"focus-visible:outline-grey-600 flex w-full justify-center rounded-md bg-gray-900 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-gray-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",children:"Delete Account"})})]}),l.jsx("div",{className:"mt-8 text-lg font-bold leading-9 tracking-tight text-gray-900",children:l.jsx("form",{children:l.jsx("button",{className:"focus-visible:outline-grey-600 flex w-full justify-center rounded-md bg-gray-900 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-gray-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",children:l.jsx(o(),{href:"/profile",children:"Cancel"})})})})]})})]})}}};