"use strict";exports.id=3330,exports.ids=[3330],exports.modules={45938:(e,s,t)=>{t.r(s),t.d(s,{default:()=>ChangePasswordSideBar});var a=t(30784),i=t(9885),r=t(57114),l=t(74284),o=t(11440),d=t.n(o);let isPasswordNull=async(e,s)=>{let t=await fetch("/api/getUserData",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e}),cache:"no-store"}),a=await t.json();s(null==a.user.password)};function ChangePasswordSideBar(){let e=(0,r.useRouter)(),{data:s}=(0,l.useSession)();(0,i.useEffect)(()=>{s&&s.user&&s.user.email||e.push("/")});let t=s?.user?.email,[o,n]=(0,i.useState)("");(0,i.useEffect)(()=>{let getName=async()=>{await isPasswordNull(t,n)};getName()},[]),(0,i.useEffect)(()=>{o&&e.push("/profile/addPassword")});let[c,u]=(0,i.useState)(""),[m,g]=(0,i.useState)(""),[h,f]=(0,i.useState)(""),[p,x]=(0,i.useState)(!1),[w,y]=(0,i.useState)(!1),[A,b]=(0,i.useState)(!1),handleSubmit=async s=>{s.preventDefault();try{let e=await fetch("/api/checkPassword",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,oldPW:c})});if(!e.ok){x(!0);return}}catch(e){console.log("Error during password comparision: ",e)}if(m!=h){b(!0);return}try{let s=await fetch("/api/changePassword",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,newPW1:m})});s&&e.push("/profile")}catch(e){console.log("Error during password update: ",e)}};return(0,a.jsxs)("div",{className:"flex min-h-screen flex-col",children:[a.jsx("header",{className:"sticky top-0 flex h-16 items-center justify-center text-2xl font-bold",children:"Change Password"}),a.jsx("div",{className:"flex flex-1 flex-col md:flex-row",children:(0,a.jsxs)("aside",{className:"w-full",children:[(0,a.jsxs)("form",{onSubmit:handleSubmit,action:"#",method:"POST",className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium leading-6 text-gray-900",children:"Current Password"}),a.jsx("div",{className:"mt-2",children:a.jsx("input",{onChange:e=>{u(e.target.value),x(!1)},id:"oldPassword",name:"oldPassword",type:"password",autoComplete:"password",className:"block w-full rounded-md border-0 py-1.5 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})}),p&&a.jsx("div",{className:"mt-2 text-sm leading-6 text-red-500",children:"Entered password does not match current password"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-gray-900",children:"New Password"}),a.jsx("div",{className:"mt-2",children:a.jsx("input",{onChange:e=>g(e.target.value),id:"password1",name:"password1",type:"password",required:!0,className:"block w-full rounded-md border-0 py-1.5 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})}),w&&a.jsx("div",{className:"mt-2 text-sm leading-6 text-red-500",children:"Password must suck less"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-gray-900",children:"Re-Enter New Password"}),a.jsx("div",{className:"mt-2",children:a.jsx("input",{onChange:e=>{f(e.target.value),b(!1)},id:"password2",name:"password2",type:"password",required:!0,className:"block w-full rounded-md border-0 py-1.5 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})}),A&&a.jsx("div",{className:"mt-2 text-sm leading-6 text-red-500",children:"Passwords must match"})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",className:"focus-visible:outline-grey-600 flex w-full justify-center rounded-md bg-gray-900 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-gray-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",children:"Update Password"})})]}),a.jsx("div",{className:"mt-8 text-lg font-bold leading-9 tracking-tight text-gray-900",children:a.jsx("form",{children:a.jsx("button",{className:"focus-visible:outline-grey-600 flex w-full justify-center rounded-md bg-gray-900 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-gray-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",children:a.jsx(d(),{href:"/profile",children:"Cancel"})})})})]})})]})}},11078:(e,s,t)=>{t.r(s),t.d(s,{default:()=>a});let a={src:"/_next/static/media/happy_groot.1fe7cf49.png",height:1024,width:1024,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAgVBMVEV4sFairYif5rpkcE1xgk5UilSGv1E6hVuin2yItZdnh2aL0YBTnnVSf1CJrFK4pGiIcVKqpn6UqWyCtmaep4N8iWeBl1yPp3Y/ZUltrVl9xomWymyHwJpuuH+cyaNCeViZwIU9dEub4pqdi1B3uYyZfWQacG8fmo+ovW19dFp5tmq8T596AAAACHRSTlP+/////////kgsYtwAAAAJcEhZcwAACxMAAAsTAQCanBgAAABISURBVHicBcEFAoAgAASwQ0JSxO7u/z/QDasTXSR4A5fOg2kZBZUmGjmr8MpjW6wuoYPaiSIFrFRpmOoM9/ecskeOK068TxD/kpkEOnSmjXkAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}}};