"use strict";exports.id=2460,exports.ids=[2460],exports.modules={22460:(e,s,a)=>{a.r(s),a.d(s,{POST:()=>POST});var t=a(95798),o=a(24837),n=a(18517),r=a(87812),i=a(62421),d=a.n(i);async function POST(e){try{if(await (0,o.q)(),"POST"!==e.method)return t.Z.json({message:"Method Error"},{status:405});let{teamName:s,password:a,userEmail:i}=await e.json(),m=await n.Z.findOne({name:s});if(!m)return t.Z.json({message:"Team not found"},{status:401});console.log("Passed existingTeam check");let u=await r.Z.findOne({email:i});if(!u)return t.Z.json({message:"User not found"},{status:401});console.log("Passed findUser check");let l=await d().compare(a,m.password);if(!l)return t.Z.json({message:"Invalid team password"},{status:403});if(console.log("Passed password check"),m.members.length>=4)return t.Z.json({message:"Team is full"},{status:401});return console.log("Passed num members"),await m.updateOne({$push:{members:u._id}}),console.log("Passed update members"),await u.updateOne({team_id:m._id}),console.log("Passed update user"),t.Z.json({message:"Team Joined"},{status:201})}catch(e){return t.Z.json({message:"An error occurred while joining a team."},{status:500})}}}};