(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[279],{9564:function(e,t,s){Promise.resolve().then(s.t.bind(s,3359,23)),Promise.resolve().then(s.bind(s,7669)),Promise.resolve().then(s.bind(s,5028))},7669:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return DeleteUserSidebar}});var i=s(2987),l=s(7317),n=s(6396),r=s(2331),a=s(5049),o=s.n(a);function DeleteUserSidebar(){var e;let t=(0,n.useRouter)(),{data:s}=(0,r.useSession)();(0,l.useEffect)(()=>{s&&s.user&&s.user.email||t.push("/")});let a=null==s?void 0:null===(e=s.user)||void 0===e?void 0:e.email,[d,c]=(0,l.useState)(""),[u,m]=(0,l.useState)(!1),handleSubmit=async e=>{if(e.preventDefault(),d!=a){m(!0);return}try{let e=await fetch("/api/deleteUser",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a})});e&&(0,r.signOut)({callbackUrl:"http://localhost:3000/"})}catch(e){console.log("Error during user deletion: ",e)}};return(0,i.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,i.jsx)("header",{className:"sticky top-0 flex h-16 items-center justify-center text-2xl font-bold",children:"Delete Account"}),(0,i.jsx)("h2",{className:"mt-8 text-lg font-bold tracking-tight text-red-500",children:"Warning: this will permanently delete your account"}),(0,i.jsx)("div",{className:"mt-8 flex flex-1 flex-col md:flex-row",children:(0,i.jsxs)("aside",{className:"w-full",children:[(0,i.jsxs)("form",{onSubmit:handleSubmit,action:"#",method:"POST",className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-gray-900",children:"Enter current email to confirm"}),(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)("input",{onChange:e=>c(e.target.value),id:"email",name:"email",type:"email",required:!0,className:"block w-full rounded-md border-0 py-1.5 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})}),u&&(0,i.jsx)("div",{className:"mt-2 text-sm leading-6 text-red-500",children:"Entered email does not match"})]}),(0,i.jsx)("div",{children:(0,i.jsx)("button",{type:"submit",className:"focus-visible:outline-grey-600 flex w-full justify-center rounded-md bg-gray-900 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-gray-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",children:"Delete Account"})})]}),(0,i.jsx)("div",{className:"mt-8 text-lg font-bold leading-9 tracking-tight text-gray-900",children:(0,i.jsx)("form",{children:(0,i.jsx)("button",{className:"focus-visible:outline-grey-600 flex w-full justify-center rounded-md bg-gray-900 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-gray-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",children:(0,i.jsx)(o(),{href:"/profile",children:"Cancel"})})})})]})})]})}},5028:function(e,t,s){"use strict";s.r(t),t.default={src:"/_next/static/media/happy_groot.1fe7cf49.png",height:1024,width:1024,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA+0lEQVR42g3KP0rDYABA8df8a2NrbPoFCSpYS2pB0S6OgoLo4OYZPIB4Ay/hRdzqIHoAq4KLINIOFUOIBk3aJo1+Zni85VfaOz+WrjA4PPL5kqcsL+0QDM546AtGTwlKs2Gyn6j0eusIxSaMrwmTRTwk3aqB4kxz3A2H3ZMW+tocr4OY++cyaSppb9ULUBGMU4PAt/idhWxbJvqCS6oJ8shE+641qNRrrOoW9tUdcqXDgddFjGPUImVml8jTmOCvzGdSRS9uCZMo+yAqvaNc0uLNydg0HnGs+QL4TCe3DLUXMnuCKpqdiyQN8aohbd1Eyh+G+QhV0eRNX/IPQkNcRfOB1Z4AAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}}},function(e){e.O(0,[340,359,988,195,338,744],function(){return e(e.s=9564)}),_N_E=e.O()}]);