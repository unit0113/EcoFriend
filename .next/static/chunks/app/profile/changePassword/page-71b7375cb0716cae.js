(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[727],{1118:function(e,s,t){Promise.resolve().then(t.t.bind(t,413,23)),Promise.resolve().then(t.bind(t,3962)),Promise.resolve().then(t.bind(t,7899))},3962:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return ChangePasswordSidebar}});var i=t(7437),a=t(2265),r=t(4033),n=t(2749),o=t(1396),l=t.n(o);function ChangePasswordSidebar(){var e;let s=(0,r.useRouter)(),{data:t}=(0,n.useSession)();(0,a.useEffect)(()=>{var e;(null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.email)||s.push("/")},[t]);let o=null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.email,[d,c]=(0,a.useState)(""),[u,m]=(0,a.useState)(""),[f,g]=(0,a.useState)(""),[h,p]=(0,a.useState)(!1),[x,w]=(0,a.useState)(!1),[y,b]=(0,a.useState)(!1),[A,v]=(0,a.useState)(!0);(0,a.useEffect)(()=>{!async function(){var e;let s=await fetch("/api/getUserData",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o}),cache:"no-store"}),t=await s.json();b((null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.password)!=null),v(!1)}()},[y]);let handleSubmit=async e=>{if(e.preventDefault(),y)try{let e=await fetch("/api/checkPassword",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,oldPW:d})});if(!e.ok){p(!0);return}}catch(e){console.log("Error during password comparision: ",e)}if(u!=f){w(!0);return}try{let e=await fetch("/api/changePassword",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,newPW1:u})});e&&s.push("/profile")}catch(e){console.log("Error during password update: ",e)}};if(!A)return(0,i.jsxs)("div",{className:"flex min-h-screen flex-col",children:[y&&(0,i.jsx)("header",{className:"sticky top-0 flex h-16 items-center justify-center text-2xl font-bold",children:"Change Password"}),!y&&(0,i.jsx)("header",{className:"sticky top-0 flex h-16 items-center justify-center text-2xl font-bold",children:"Add New Password"}),(0,i.jsx)("div",{className:"flex flex-1 flex-col md:flex-row",children:(0,i.jsxs)("aside",{className:"w-full",children:[(0,i.jsxs)("form",{onSubmit:handleSubmit,action:"#",method:"POST",className:"space-y-6",children:[y&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium leading-6 text-gray-900",children:"Current Password"}),(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)("input",{onChange:e=>{c(e.target.value),p(!1)},id:"oldPassword",name:"oldPassword",type:"password",className:"block w-full rounded-md border-0 py-1.5 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})}),h&&(0,i.jsx)("div",{className:"mt-2 text-sm leading-6 text-red-500",children:"Entered password does not match current password"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-gray-900",children:"New Password"}),(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)("input",{onChange:e=>m(e.target.value),id:"password1",name:"password1",type:"password",required:!0,className:"block w-full rounded-md border-0 py-1.5 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium leading-6 text-gray-900",children:"Re-Enter New Password"}),(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)("input",{onChange:e=>{g(e.target.value),w(!1)},id:"password2",name:"password2",type:"password",required:!0,className:"block w-full rounded-md border-0 py-1.5 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"})}),x&&(0,i.jsx)("div",{className:"mt-2 text-sm leading-6 text-red-500",children:"Passwords must match"})]}),(0,i.jsx)("div",{children:(0,i.jsx)("button",{type:"submit",className:"focus-visible:outline-grey-600 flex w-full justify-center rounded-md bg-gray-900 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-gray-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",children:"Update Password"})})]}),(0,i.jsx)("div",{className:"mt-8 text-lg font-bold leading-9 tracking-tight text-gray-900",children:(0,i.jsx)("form",{children:(0,i.jsx)("button",{className:"focus-visible:outline-grey-600 flex w-full justify-center rounded-md bg-gray-900 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-gray-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2",children:(0,i.jsx)(l(),{href:"/profile",children:"Cancel"})})})})]})})]})}},7899:function(e,s,t){"use strict";t.r(s),s.default={src:"/_next/static/media/happy_groot.1fe7cf49.png",height:1024,width:1024,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAgVBMVEV4sFairYif5rpkcE1xgk5UilSGv1E6hVuin2yItZdnh2aL0YBTnnVSf1CJrFK4pGiIcVKqpn6UqWyCtmaep4N8iWeBl1yPp3Y/ZUltrVl9xomWymyHwJpuuH+cyaNCeViZwIU9dEub4pqdi1B3uYyZfWQacG8fmo+ovW19dFp5tmq8T596AAAACHRSTlP+/////////kgsYtwAAAAJcEhZcwAACxMAAAsTAQCanBgAAABISURBVHicBcEFAoAgAASwQ0JSxO7u/z/QDasTXSR4A5fOg2kZBZUmGjmr8MpjW6wuoYPaiSIFrFRpmOoM9/ecskeOK068TxD/kpkEOnSmjXkAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}},1396:function(e,s,t){e.exports=t(8326)}},function(e){e.O(0,[122,413,232,971,472,744],function(){return e(e.s=1118)}),_N_E=e.O()}]);